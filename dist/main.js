!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=jQuery},function(e,t,n){"use strict";n.r(t);n(2),n(3)},function(e,t,n){},function(e,t,n){"use strict";(function(e){var t,a;n(4);t=window.image_crop_positioner=window.image_crop_positioner||{},a=e,t.instantiateElement=function(e){var n=a(e),i=n.attr("data-image-crop-positioner-module");if(void 0===i)throw'Image Crop Positioner module not defined (use data-image-crop-positioner-module="")';if(!(i in t))throw"Module '"+i+"' not found";new t[i](e),n.attr("data-initialized",!0)},t.instantiateModules=function(){a("[data-image-crop-positioner-module]:not([data-initialized])").each((function(){t.instantiateElement(this)}))},t.bootstrap=function(){t.instantiateModules(),new t.editImageScreen,wp.media&&wp.media.view.Modal.prototype.on("open",(function(){t.instantiateModules()}))},t.bootstrap()}).call(this,n(0))},function(e,t,n){(function(e){var t;t=e,(window.image_crop_positioner=window.image_crop_positioner||{}).editImageScreen=function(){var e={};function n(){s(".image-previews__images").html('<div class="spinner__wrapper"><div class="spinner is-active"></div></div>'),t.ajax({url:window.image_crop_positioner_options.ajax_url,data:{_ajax_nonce:window.image_crop_positioner_options.nonce,action:"image_crop_positioner_image_previews",attachment_id:e.attachment_id},method:"POST",dataType:"json",timeout:3e4}).done((function(e){s(".image-previews__images").empty(),e.data.forEach((function(e){s(".image-previews__images").append(e.html)}))})).fail((function(e){var t="Error";void 0!==e.responseJSON.data[0].message&&(t=e.responseJSON.data[0].message),s(".image-previews__images").html(f(t,"error"))}))}function a(){i(),o(e.faces)}function i(){s(".image-spots-preview__spots").find(".spot").remove()}function o(n){s(".image-spots-preview__spots").find(".spot__face").remove(),n.forEach((function(n){var a,i,o,r,c,d;a=n,i=t('<div class="spot spot__'.concat("face",'" ></div>')),o=a.x/e.attachment_metadata.width*100,r=a.y/e.attachment_metadata.height*100,c=a.width/e.attachment_metadata.width*100,d=a.height/e.attachment_metadata.height*100,i.css({top:"".concat(r,"%"),left:"".concat(o,"%"),width:"".concat(c,"%"),height:"".concat(d,"%")}),s(".image-spots-preview__spots").append(i)}))}function r(){return t(".image-crop-positioner-attachment-edit-fields")}function s(e){return r().find(e)}function c(){return s(".button__detect-faces")}function d(){return s(".button__save-faces")}function p(){return s(".button__discard-faces")}function u(){return s(".button__remove-faces")}function _(){return s(".face-detection__message")}function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t('<div class="notice notice-'.concat(n,' inline" >').concat(e,"</div>"));return a&&i.addClass("is-dismissable"),i}function m(e){return e.find(".spinner__wrapper").remove()}wp.media&&wp.media.view.Modal.prototype.on("open",(function(){e=JSON.parse(r().attr("data-config")),a(),s(".button__detect-faces").on("click",(function(){c().append('<div class="spinner__wrapper"><div class="spinner is-active"></div></div>'),c().prop("disabled",!0),_().empty(),t.ajax({url:window.image_crop_positioner_options.ajax_url,data:{_ajax_nonce:window.image_crop_positioner_options.nonce,action:"image_crop_positioner_face_detection",attachment_id:e.attachment_id},method:"POST",dataType:"json",timeout:3e4}).done((function(e){i(),d().attr("data-faces",JSON.stringify(e.data.faces)),o(e.data.faces),e.data.faces.length>0?(_().html(f("Please confirm that the found face is correct.","info")),c().hide(),d().show(),p().show()):_().html(f("No faces found.","warning"))})).fail((function(e){var t="Error";void 0!==e.responseJSON.data[0].message&&(t=e.responseJSON.data[0].message),_().html(f(t,"error"))})).always((function(){m(c()),c().prop("disabled",!1)}))})),s(".button__discard-faces").on("click",(function(){a(),c().show(),p().hide(),d().hide(),_().empty()})),s(".button__save-faces").on("click",(function(){d().append('<div class="spinner__wrapper"><div class="spinner is-active"></div></div>'),d().prop("disabled",!0),p().prop("disabled",!0),_().empty(),t.ajax({url:window.image_crop_positioner_options.ajax_url,data:{_ajax_nonce:window.image_crop_positioner_options.nonce,action:"image_crop_positioner_save_faces",attachment_id:e.attachment_id,faces:JSON.parse(d().attr("data-faces"))},method:"POST",dataType:"json",timeout:3e4}).done((function(t){e.faces=t.data.faces,a(),n(),d().hide(),p().hide(),u().show(),_().html(f("Faces are saved.","success"))})).fail((function(e){var t="Error";void 0!==e.responseJSON.data[0].message&&(t=e.responseJSON.data[0].message),_().html(f(t,"error"))})).always((function(){m(d()),d().prop("disabled",!1),p().prop("disabled",!1)}))})),s(".button__remove-faces").on("click",(function(){u().append('<div class="spinner__wrapper"><div class="spinner is-active"></div></div>'),u().prop("disabled",!0),_().empty(),t.ajax({url:window.image_crop_positioner_options.ajax_url,data:{_ajax_nonce:window.image_crop_positioner_options.nonce,action:"image_crop_positioner_remove_faces",attachment_id:e.attachment_id},method:"POST",dataType:"json",timeout:3e4}).done((function(t){e.faces=t.data.faces,a(),n(),u().hide(),c().show(),_().html(f("Faces are removed.","success"))})).fail((function(e){var t="Error";void 0!==e.responseJSON.data[0].message&&(t=e.responseJSON.data[0].message),_().html(f(t,"error"))})).always((function(){m(u()),u().prop("disabled",!1),u().prop("disabled",!1)}))})),n()}))}}).call(this,n(0))}]);